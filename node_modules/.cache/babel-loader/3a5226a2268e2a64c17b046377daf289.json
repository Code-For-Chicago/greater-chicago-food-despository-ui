{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ethangabrielse/react-workspace/mapbox-test/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport ReactMapGL, { Source, Layer } from 'react-map-gl';\nimport illinois_counties from './illinois_counties.json';\nimport { baseLayer } from './CountyLayer';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      filter: ['in', 'COUNTY', ''],\n      viewport: {\n        latitude: 40.150196,\n        longitude: -89.367848,\n        zoom: 6,\n        width: \"50vw\",\n        height: \"100vh\"\n      },\n      x: null,\n      y: null,\n      hoveredFeature: null\n    };\n\n    this.onHover = event => {\n      const {\n        features,\n        srcEvent: {\n          offsetX,\n          offsetY\n        }\n      } = event;\n      const hoveredFeature = features && features.find(f => f.layer.id === 'county');\n      console.log(hoveredFeature);\n      this.setState({\n        hoveredFeature: hoveredFeature,\n        x: offsetX,\n        y: offsetY,\n        filter: ['in', 'COUNTY', hoveredFeature.properties.COUNTY]\n      });\n    };\n  }\n\n  componentDidMount() {\n    // API Call to get data\n    this.setState({\n      data: this.addSelected(illinois_counties)\n    });\n  }\n\n  addSelected(featureCollection) {\n    const {\n      features\n    } = featureCollection;\n    return {\n      type: 'FeatureCollection',\n      features: features.map(f => {\n        const properties = { ...f.properties,\n          selected: false\n        };\n        return { ...f,\n          properties\n        };\n      })\n    };\n  }\n\n  renderTooltip() {\n    const {\n      hoveredFeature,\n      x,\n      y\n    } = this.state;\n    return hoveredFeature && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tooltip\",\n      style: {\n        left: x,\n        top: y\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"County: \", hoveredFeature.properties.NAME]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"FIPS: \", hoveredFeature.properties.COUNTY]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(ReactMapGL, { ...this.state.viewport,\n        mapboxApiAccessToken: \"pk.eyJ1IjoiZWdhYnJpZWxzZSIsImEiOiJja2d2ZDZua2QwMWI3M2JwajA0Z3lqbDdmIn0.sAaMKjFMEglTFxZwKyU75Q\",\n        onViewportChange: newViewport => this.setState({\n          viewport: newViewport\n        }),\n        onHover: this.onHover,\n        children: [/*#__PURE__*/_jsxDEV(Source, {\n          id: \"counties\",\n          type: \"geojson\",\n          data: this.state.data,\n          children: /*#__PURE__*/_jsxDEV(Layer, { ...baseLayer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), this.renderTooltip()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/ethangabrielse/react-workspace/mapbox-test/src/App.js"],"names":["React","Component","ReactMapGL","Source","Layer","illinois_counties","baseLayer","App","state","data","filter","viewport","latitude","longitude","zoom","width","height","x","y","hoveredFeature","onHover","event","features","srcEvent","offsetX","offsetY","find","f","layer","id","console","log","setState","properties","COUNTY","componentDidMount","addSelected","featureCollection","type","map","selected","renderTooltip","left","top","NAME","render","newViewport"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, {Component} from 'react';\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport illinois_counties from './illinois_counties.json';\nimport {baseLayer} from './CountyLayer';\n\nclass App extends Component {\n  state = {\n    data: null,\n    filter: ['in', 'COUNTY', ''],\n    viewport: {\n      latitude: 40.150196,\n      longitude: -89.367848, \n      zoom: 6,\n      width: \"50vw\",\n      height: \"100vh\"\n    },\n    x: null,\n    y: null,\n    hoveredFeature: null\n  }\n\n  componentDidMount() {\n    // API Call to get data\n    this.setState({data: this.addSelected(illinois_counties)})\n  }\n\n  addSelected(featureCollection) {\n    const {features} = featureCollection;\n    return {\n      type: 'FeatureCollection',\n      features: features.map(f => {\n        const properties = {\n          ...f.properties,\n          selected: false\n        };\n        return {...f, properties};\n      })\n    };\n  }\n\n\n  onHover = event => {\n    const {\n      features,\n      srcEvent: {offsetX, offsetY}\n    } = event;\n    const hoveredFeature = features && features.find(f => f.layer.id === 'county');\n    console.log(hoveredFeature);\n    this.setState({hoveredFeature: hoveredFeature, x: offsetX, y: offsetY, filter: ['in', 'COUNTY', hoveredFeature.properties.COUNTY]});\n  };\n\n  renderTooltip() {\n    const {hoveredFeature, x, y} = this.state;\n\n    return (\n      hoveredFeature && (\n        <div className=\"tooltip\" style={{left: x, top: y}}>\n          <div>County: {hoveredFeature.properties.NAME}</div>\n          <div>FIPS: {hoveredFeature.properties.COUNTY}</div>\n        </div>\n      )\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ReactMapGL\n          {...this.state.viewport}\n          mapboxApiAccessToken={\"pk.eyJ1IjoiZWdhYnJpZWxzZSIsImEiOiJja2d2ZDZua2QwMWI3M2JwajA0Z3lqbDdmIn0.sAaMKjFMEglTFxZwKyU75Q\"}\n          onViewportChange={(newViewport) => this.setState({viewport: newViewport})}\n          onHover={this.onHover}\n        >\n          <Source id=\"counties\" type=\"geojson\" data={this.state.data}>\n            <Layer {...baseLayer}></Layer>\n          </Source>\n          {this.renderTooltip()}\n        </ReactMapGL>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}